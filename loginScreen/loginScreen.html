<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<link href="loginScreen.css" type="text/css" rel="stylesheet"/>

<div class="loginScreen">
    <center>
        <div class="loginScreen-heading"><h1>Ludus Tempus</h1></div>
        <div class="loginScreen-text">
            <p> Studienr: <input type="text" id="studieNrInput" ng-model="studieNr"></p>
            <p>Password: <input type="password" id="passwordInput" ng-model="password"></p>
            <button type="button" id="passwordEnter"> Login</button>

        </div>
    </center>
</div>

<script src=loginScreen.js></script>
<script src="../soapclient.js"></script>
<script src="../jquery-3.2.1.js"></script>


<script>
    $(function () {
        $('#passwordEnter').on('click', function () {
            login();
        });

        $("#passwordInput").keyup(function(event){
            if(event.keyCode == 13){
                $("#passwordEnter").click();
            }
        });

    });
</script>

<script>
    function login() {
        var studieNr = document.getElementById('studieNrInput').value;
        var password = document.getElementById('passwordInput').value;

        $.ajax({
            url: 'http://localhost:8080/webapi/brugerautorisation/hentBruger=' + studieNr + '+' +password,
            dataType: 'json ',
            type: 'get',
            cache: false,
            success: function(data) {
                if(data != null) {
                    window.location = "../profileViewer/profileViewer.html";
                } else {
                    alert("Wrong password");
                }
            },
            error: function () {
                alert("Please enter values");
            }
        });
    }
</script>

